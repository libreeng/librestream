<html>
<head>
    <title>Recaptcha test for Librestream 7/13/2021</title>

    <!--  ----------------------------------------------------------------------  -->

    <!--  NOTE: Please add the following <META> element to your page <HEAD>.      -->

    <!--  If necessary, please modify the charset parameter to specify the        -->

    <!--  character set of your HTML page.                                        -->

    <!--  ----------------------------------------------------------------------  -->    

    <META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=UTF-8">

    <script src="https://www.google.com/recaptcha/api.js"></script>
    <style>
        label{display:inline-block;width:110px;vertical-align:top;}
        label:after{content:":";}
        input,textarea{width:300px;margin-bottom:8px;}
        input[name='captcha_settings']{width:100%;max-width:640px;}
    </style>

    <script>

        function timestamp() { 
            var response = document.getElementById("g-recaptcha-response"); 
            if (response == null || response.value.trim() == "") {
                var elems = JSON.parse(document.getElementsByName("captcha_settings")[0].value);
                elems["ts"] = JSON.stringify(new Date().getTime());
                document.getElementsByName("captcha_settings")[0].value = JSON.stringify(elems);

                
                var elems2 = JSON.parse(document.getElementsByName("captcha_settings")[1].value);
                elems2["ts"] = JSON.stringify(new Date().getTime());
                document.getElementsByName("captcha_settings")[1].value = JSON.stringify(elems2);
            } 
        } 
        setInterval(timestamp, 500);

    </script>

 </head>
 <body>

<!--  ----------------------------------------------------------------------  -->

<!--  NOTE: Please add the following <FORM> element to your page.             -->

<!--  ----------------------------------------------------------------------  -->

 <b>Updates to the original SalesForce code:</b>
 <BR> Removed the retURL value so that we can debug salesforce messages. <BR>
 Uncommented the debug fields. <BR>
 Changed some emails from "hidden" to "text" so they can be inspected easily.

<div style="border:1px solid grey;padding:15px;margin:15px;border-radius:8px;background-color:#FFFFFF;">
  <h2>Test form #1. Fallack = false</h2>
  <form action="https://webto.salesforce.com/servlet/servlet.WebToCase?encoding=UTF-8" method="POST">

    <input type=text name='captcha_settings' value='{"keyname":"OCUPOPSupportForm","fallback":"false","orgId":"00DA0000000J3qY","ts":""}'><br>
    <label for="orgid">OrgID</label><input type=text name="orgid" value="00DA0000000J3qY"><br>
    <input type=hidden name="retURL" value="">
    
    <!--  ----------------------------------------------------------------------  -->
    <!--  NOTE: These fields are optional debugging elements. Please uncomment    -->
    <!--  these lines if you wish to test in debug mode.                          -->
    <label for="debug">Debug (1 or 0)</label><input type="text" name="debug" value=1>                        <br>
    <label for="debugEmail">Debug Email</label><input type="text" name="debugEmail"  value="paulstroot@gmail.com"><br>  
    <!--  ----------------------------------------------------------------------  -->
    
    <label for="name">Contact Name</label><input  id="name" maxlength="80" name="name" size="20" type="text" /><br>
    
    <label for="email">Email</label><input  id="email" maxlength="80" name="email" size="20" type="text" /><br>
    
    <label for="phone">Phone</label><input  id="phone" maxlength="40" name="phone" size="20" type="text" /><br>
    
    <label for="subject">Subject</label><input  id="subject" maxlength="80" name="subject" size="20" type="text" /><br>
    
    <label for="description">Description</label><textarea name="description"></textarea><br>
    
    <input type="hidden"  id="external" name="external" value="1" /><br>
    
    <div class="g-recaptcha" data-sitekey="6Lcdu70aAAAAAPXJw-zXwUNk7ulMJtwGifOBRTsS"></div><br>
    
    <input type="submit" name="submit">
    
    </form>
	
</div>
<div style="border:1px solid grey;padding:15px;margin:15px;border-radius:8px;background-color:#FFFFFF;">
	<h2>Test form #2. Fallack = true</h2>
    <form action="https://webto.salesforce.com/servlet/servlet.WebToCase?encoding=UTF-8" method="POST">

    <input type=text name='captcha_settings' value='{"keyname":"OCUPOPSupportForm","fallback":"true","orgId":"00DA0000000J3qY","ts":""}'><br>
    <label for="orgid">OrgID</label><input type=text name="orgid" value="00DA0000000J3qY"><br>
    <input type=hidden name="retURL" value="">
    
    <!--  ----------------------------------------------------------------------  -->
    <!--  NOTE: These fields are optional debugging elements. Please uncomment    -->
    <!--  these lines if you wish to test in debug mode.                          -->
    <label for="debug">Debug (1 or 0)</label><input type="text" name="debug" value=1>                        <br>
    <label for="debugEmail">Debug Email</label><input type="text" name="debugEmail"  value="paulstroot@gmail.com"><br>  
    <!--  ----------------------------------------------------------------------  -->
    
    <label for="name">Contact Name</label><input  id="name" maxlength="80" name="name" size="20" type="text" /><br>
    
    <label for="email">Email</label><input  id="email" maxlength="80" name="email" size="20" type="text" /><br>
    
    <label for="phone">Phone</label><input  id="phone" maxlength="40" name="phone" size="20" type="text" /><br>
    
    <label for="subject">Subject</label><input  id="subject" maxlength="80" name="subject" size="20" type="text" /><br>
    
    <label for="description">Description</label><textarea name="description"></textarea><br>
    
    <input type="hidden"  id="external" name="external" value="1" /><br>
    
    <div class="g-recaptcha" data-sitekey="6Lcdu70aAAAAAPXJw-zXwUNk7ulMJtwGifOBRTsS"></div><br>
    
    <input type="submit" name="submit">
    
    </form>
	
</div>
	
</body>
</html>